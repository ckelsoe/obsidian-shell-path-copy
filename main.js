/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var r=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var f=(l,t)=>{for(var s in t)r(l,s,{get:t[s],enumerable:!0})},m=(l,t,s,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of w(t))!b.call(l,i)&&i!==s&&r(l,i,{get:()=>t[i],enumerable:!(e=g(t,i))||e.enumerable});return l};var y=l=>m(r({},"__esModule",{value:!0}),l);var v={};f(v,{default:()=>h});module.exports=y(v);var a=require("obsidian"),P={pathWrapping:"backticks",showNotifications:!0,menuDisplay:"both",showAbsolutePath:!0,wrapAbsolutePathsInQuotes:!0},h=class extends a.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.workspace.on("file-menu",(t,s)=>{this.addPathCopyMenuItems(t,s)})),this.registerCommands(),this.addSettingTab(new c(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},P,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){let t=this.settings.menuDisplay==="both",s=this.settings.menuDisplay==="windows",e=this.settings.menuDisplay==="linux-mac";(t||e)&&this.addCommand({id:"copy-unix-path",name:"Copy as Linux/Mac path",callback:()=>{let i=this.getActiveOrFocusedFile();i&&this.copyPath(i,"unix")}}),(t||s)&&this.addCommand({id:"copy-windows-path",name:"Copy as Windows path",callback:()=>{let i=this.getActiveOrFocusedFile();i&&this.copyPath(i,"windows")}}),!a.Platform.isMobile&&this.settings.showAbsolutePath&&this.addCommand({id:"copy-absolute-path",name:"Copy as absolute path",callback:()=>{let i=this.getActiveOrFocusedFile();i&&this.copyAbsolutePath(i)}})}createPathMenuItem(t,s,e){let i=e==="unix",p=i?"Copy Relative Linux/Mac Path":"Copy Relative Windows Path",o=i?"terminal":"folder-closed";t.addItem(n=>{n.setTitle(p).setIcon(o).setSection("shell-path-copy").onClick(async()=>{await this.copyPath(s,e)})})}addPathCopyMenuItems(t,s){let e=this.settings.menuDisplay==="both",i=this.settings.menuDisplay==="windows",p=this.settings.menuDisplay==="linux-mac";t.addSeparator(),(e||p)&&this.createPathMenuItem(t,s,"unix"),(e||i)&&this.createPathMenuItem(t,s,"windows"),!a.Platform.isMobile&&this.settings.showAbsolutePath&&t.addItem(o=>{o.setTitle("Copy Absolute Path").setIcon("link").setSection("shell-path-copy").onClick(async()=>{await this.copyAbsolutePath(s)})})}async copyPath(t,s){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let e=t.path;s==="windows"?(e=e.replace(/\//g,"\\"),e&&!e.startsWith("\\")&&(e="\\"+e)):e&&!e.startsWith("/")&&(e="/"+e),t.path||(e=s==="windows"?"\\":"/");let i=this.wrapPath(e);if(await navigator.clipboard.writeText(i),this.settings.showNotifications){let p=s==="unix"?"Linux/Mac":"Windows";new a.Notice(`${p} path copied!`)}}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new a.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy path:",e),new a.Notice("Failed to copy path. See console for details."))}}async copyAbsolutePath(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let e=this.app.vault.adapter.getFullRealPath(t.path),i=this.settings.wrapAbsolutePathsInQuotes?`"${e}"`:this.wrapPath(e);await navigator.clipboard.writeText(i),this.settings.showNotifications&&new a.Notice("Absolute path copied!")}catch(s){s instanceof Error&&s.message.includes("Clipboard API")?new a.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy absolute path:",s),new a.Notice("Failed to copy absolute path. See console for details."))}}wrapPath(t){switch(this.settings.pathWrapping){case"double-quotes":return`"${t}"`;case"single-quotes":return`'${t}'`;case"backticks":return`\`${t}\``;case"none":default:return t}}getActiveFile(){return this.app.workspace.getActiveFile()}getFocusedFileInExplorer(){let t=this.app.workspace.getLeavesOfType("file-explorer")[0];if(!t)return null;let s=t.view.containerEl.querySelector(".nav-file.is-focused, .nav-folder.is-focused");if(!s)return null;let e=s.getAttribute("data-path");return e?this.app.vault.getAbstractFileByPath(e):null}getActiveOrFocusedFile(){let t=this.getActiveFile();return t||(t=this.getFocusedFileInExplorer()),t||new a.Notice("No file selected"),t}},c=class extends a.PluginSettingTab{constructor(t,s){super(t,s),this.plugin=s}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Shell Path Copy"}),t.createEl("p",{text:"Copy file and folder paths with shell-friendly formatting for Linux and Windows.",cls:"setting-item-description"});let s=t.createEl("div",{cls:"setting-item-description"}),e=(o,n)=>{let d=s.createEl("a",{text:o,href:n});return d.onclick=u=>{u.preventDefault(),window.open(n)},d};e("GitHub Repository","https://github.com/ckelsoe/obsidian-shell-path-copy"),s.createEl("span",{text:" | "}),e("Report Issues & Feature Requests","https://github.com/ckelsoe/obsidian-shell-path-copy/issues");let i=this.plugin.manifest.version||"1.0.0";s.createEl("span",{text:` | Version ${i}`}),t.createEl("br"),t.createEl("br"),t.createEl("h3",{text:"Settings"}),t.createEl("div",{text:"Path Format Examples:",cls:"setting-item-heading"});let p=t.createEl("div",{cls:"setting-item-description"});p.createEl("div",{text:"\u2022 Linux/Mac: /folder/subfolder/file.md"}),p.createEl("div",{text:"\u2022 Windows: \\folder\\subfolder\\file.md"}),p.createEl("div",{text:"\u2022 Absolute: C:\\Users\\name\\vault\\folder\\file.md (Windows) or /home/user/vault/folder/file.md (Linux/Mac)"}),t.createEl("br"),new a.Setting(t).setName("Path wrapping").setDesc("Choose how paths are wrapped when copied to clipboard (useful for paths with spaces)").addDropdown(o=>o.addOption("none","None - /path with spaces/file.md").addOption("double-quotes",'Double quotes - "/path with spaces/file.md"').addOption("single-quotes","Single quotes - '/path with spaces/file.md'").addOption("backticks","Backticks - `/path with spaces/file.md`").setValue(this.plugin.settings.pathWrapping).onChange(async n=>{this.plugin.settings.pathWrapping=n,await this.plugin.saveSettings()})),new a.Setting(t).setName("Menu display").setDesc("Control which path formats appear in the context menu").addDropdown(o=>o.addOption("both","Show both Windows and Linux/Mac options").addOption("windows","Show Windows options only").addOption("linux-mac","Show Linux/Mac options only").setValue(this.plugin.settings.menuDisplay).onChange(async n=>{this.plugin.settings.menuDisplay=n,await this.plugin.saveSettings(),new a.Notice("Please reload Obsidian for command palette changes to take effect")})),a.Platform.isMobile||(new a.Setting(t).setName("Show absolute path option").setDesc("Display the absolute path copy option in menus (Desktop only)").addToggle(o=>o.setValue(this.plugin.settings.showAbsolutePath).onChange(async n=>{this.plugin.settings.showAbsolutePath=n,await this.plugin.saveSettings(),new a.Notice("Please reload Obsidian for command palette changes to take effect")})),this.plugin.settings.showAbsolutePath&&new a.Setting(t).setName("Wrap absolute paths in quotes").setDesc("Always wrap absolute paths in double quotes (recommended for paths with spaces)").addToggle(o=>o.setValue(this.plugin.settings.wrapAbsolutePathsInQuotes).onChange(async n=>{this.plugin.settings.wrapAbsolutePathsInQuotes=n,await this.plugin.saveSettings()}))),new a.Setting(t).setName("Show notifications").setDesc("Display a notification when a path is copied").addToggle(o=>o.setValue(this.plugin.settings.showNotifications).onChange(async n=>{this.plugin.settings.showNotifications=n,await this.plugin.saveSettings()}))}};

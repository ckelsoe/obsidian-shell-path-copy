/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var b=(l,t)=>{for(var i in t)r(l,i,{get:t[i],enumerable:!0})},y=(l,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of g(t))!f.call(l,s)&&s!==i&&r(l,s,{get:()=>t[s],enumerable:!(e=w(t,s))||e.enumerable});return l};var m=l=>y(r({},"__esModule",{value:!0}),l);var P={};b(P,{default:()=>p});module.exports=m(P);var a=require("obsidian"),v={pathWrapping:"backticks",showNotifications:!0,menuDisplay:"both",showAbsolutePath:!0},p=class extends a.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.workspace.on("file-menu",(t,i)=>{this.addPathCopyMenuItems(t,i)})),this.registerCommands(),this.addSettingTab(new h(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},v,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){let t=this.settings.menuDisplay==="both",i=this.settings.menuDisplay==="windows",e=this.settings.menuDisplay==="linux-mac";(t||e)&&this.addCommand({id:"copy-unix-path",name:"Copy as Linux/Mac path",callback:()=>{let s=this.getActiveOrFocusedFile();s&&this.copyPath(s,"unix")}}),(t||i)&&this.addCommand({id:"copy-windows-path",name:"Copy as Windows path",callback:()=>{let s=this.getActiveOrFocusedFile();s&&this.copyPath(s,"windows")}}),!a.Platform.isMobile&&this.settings.showAbsolutePath&&this.addCommand({id:"copy-absolute-path",name:"Copy as absolute path",callback:()=>{let s=this.getActiveOrFocusedFile();s&&this.copyAbsolutePath(s)}})}createPathMenuItem(t,i,e){let s=e==="unix",c=s?"Copy Relative Linux/Mac Path":"Copy Relative Windows Path",n=s?"terminal":"folder-closed";t.addItem(o=>{o.setTitle(c).setIcon(n).setSection("shell-path-copy").onClick(async()=>{await this.copyPath(i,e)})})}addPathCopyMenuItems(t,i){let e=this.settings.menuDisplay==="both",s=this.settings.menuDisplay==="windows",c=this.settings.menuDisplay==="linux-mac";t.addSeparator(),(e||c)&&this.createPathMenuItem(t,i,"unix"),(e||s)&&this.createPathMenuItem(t,i,"windows"),!a.Platform.isMobile&&this.settings.showAbsolutePath&&t.addItem(n=>{n.setTitle("Copy Absolute Path").setIcon("link").setSection("shell-path-copy").onClick(async()=>{await this.copyAbsolutePath(i)})})}async copyPath(t,i){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let e=t.path;i==="windows"?(e=e.replace(/\//g,"\\"),e&&!e.startsWith("\\")&&(e="\\"+e)):e&&!e.startsWith("/")&&(e="/"+e),t.path||(e=i==="windows"?"\\":"/");let s=this.wrapPath(e);if(await navigator.clipboard.writeText(s),this.settings.showNotifications){let c=i==="unix"?"Linux/Mac":"Windows";new a.Notice(`${c} path copied!`)}}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new a.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy path:",e),new a.Notice("Failed to copy path. See console for details."))}}async copyAbsolutePath(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let i=this.app.vault.adapter.getFullRealPath(t.path),e=this.wrapPath(i);await navigator.clipboard.writeText(e),this.settings.showNotifications&&new a.Notice("Absolute path copied!")}catch(i){i instanceof Error&&i.message.includes("Clipboard API")?new a.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy absolute path:",i),new a.Notice("Failed to copy absolute path. See console for details."))}}wrapPath(t){switch(this.settings.pathWrapping){case"double-quotes":return`"${t}"`;case"single-quotes":return`'${t}'`;case"backticks":return`\`${t}\``;case"none":default:return t}}getActiveFile(){return this.app.workspace.getActiveFile()}getFocusedFileInExplorer(){let t=this.app.workspace.getLeavesOfType("file-explorer")[0];if(!t)return null;let i=t.view.containerEl.querySelector(".nav-file.is-focused, .nav-folder.is-focused");if(!i)return null;let e=i.getAttribute("data-path");return e?this.app.vault.getAbstractFileByPath(e):null}getActiveOrFocusedFile(){let t=this.getActiveFile();return t||(t=this.getFocusedFileInExplorer()),t||new a.Notice("No file selected"),t}},h=class extends a.PluginSettingTab{constructor(t,i){super(t,i),this.plugin=i}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Shell Path Copy"}),t.createEl("p",{text:"Copy file and folder paths with shell-friendly formatting for Linux and Windows.",cls:"setting-item-description"});let i=t.createEl("div",{cls:"setting-item-description"}),e=(n,o)=>{let d=i.createEl("a",{text:n,href:o});return d.onclick=u=>{u.preventDefault(),window.open(o)},d};e("GitHub Repository","https://github.com/ckelsoe/obsidian-shell-path-copy"),i.createEl("span",{text:" | "}),e("Report Issues & Feature Requests","https://github.com/ckelsoe/obsidian-shell-path-copy/issues");let s=this.plugin.manifest.version||"1.0.0";i.createEl("span",{text:` | Version ${s}`}),t.createEl("br"),t.createEl("br"),t.createEl("h3",{text:"Settings"}),t.createEl("div",{text:"Path Format Examples:",cls:"setting-item-heading"});let c=t.createEl("div",{cls:"setting-item-description"});c.createEl("div",{text:"\u2022 Linux/Mac: /folder/subfolder/file.md"}),c.createEl("div",{text:"\u2022 Windows: \\folder\\subfolder\\file.md"}),c.createEl("div",{text:"\u2022 Absolute: C:\\Users\\name\\vault\\folder\\file.md (Windows) or /home/user/vault/folder/file.md (Linux/Mac)"}),t.createEl("br"),new a.Setting(t).setName("Path wrapping").setDesc("Choose how paths are wrapped when copied to clipboard (useful for paths with spaces)").addDropdown(n=>n.addOption("none","None - /path with spaces/file.md").addOption("double-quotes",'Double quotes - "/path with spaces/file.md"').addOption("single-quotes","Single quotes - '/path with spaces/file.md'").addOption("backticks","Backticks - `/path with spaces/file.md`").setValue(this.plugin.settings.pathWrapping).onChange(async o=>{this.plugin.settings.pathWrapping=o,await this.plugin.saveSettings()})),new a.Setting(t).setName("Menu display").setDesc("Control which path formats appear in the context menu").addDropdown(n=>n.addOption("both","Show both Windows and Linux/Mac options").addOption("windows","Show Windows options only").addOption("linux-mac","Show Linux/Mac options only").setValue(this.plugin.settings.menuDisplay).onChange(async o=>{this.plugin.settings.menuDisplay=o,await this.plugin.saveSettings(),new a.Notice("Please reload Obsidian for command palette changes to take effect")})),a.Platform.isMobile||new a.Setting(t).setName("Show absolute path option").setDesc("Display the absolute path copy option in menus (Desktop only)").addToggle(n=>n.setValue(this.plugin.settings.showAbsolutePath).onChange(async o=>{this.plugin.settings.showAbsolutePath=o,await this.plugin.saveSettings(),new a.Notice("Please reload Obsidian for command palette changes to take effect")})),new a.Setting(t).setName("Show notifications").setDesc("Display a notification when a path is copied").addToggle(n=>n.setValue(this.plugin.settings.showNotifications).onChange(async o=>{this.plugin.settings.showNotifications=o,await this.plugin.saveSettings()}))}};

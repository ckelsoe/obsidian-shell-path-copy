/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var f=(l,t)=>{for(var e in t)r(l,e,{get:t[e],enumerable:!0})},m=(l,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of g(t))!b.call(l,a)&&a!==e&&r(l,a,{get:()=>t[a],enumerable:!(s=w(t,a))||s.enumerable});return l};var y=l=>m(r({},"__esModule",{value:!0}),l);var v={};f(v,{default:()=>p});module.exports=y(v);var i=require("obsidian"),P={pathWrapping:"backticks",showNotifications:!0,menuDisplay:"both",showAbsolutePath:!0,wrapAbsolutePathsInQuotes:!0},p=class extends i.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.workspace.on("file-menu",(t,e)=>{this.addPathCopyMenuItems(t,e)})),this.registerCommands(),this.addSettingTab(new c(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},P,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){let t=this.settings.menuDisplay==="both",e=this.settings.menuDisplay==="windows",s=this.settings.menuDisplay==="linux-mac";(t||s)&&this.addCommand({id:"copy-unix-path",name:"Copy as Linux/Mac path",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyPath(a,"unix")}}),(t||e)&&this.addCommand({id:"copy-windows-path",name:"Copy as Windows path",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyPath(a,"windows")}}),!i.Platform.isMobile&&this.settings.showAbsolutePath&&this.addCommand({id:"copy-absolute-path",name:"Copy as absolute path",callback:()=>{let a=this.getActiveOrFocusedFile();a&&this.copyAbsolutePath(a)}})}createPathMenuItem(t,e,s){let a=s==="unix",h=a?"Copy Relative Linux/Mac Path":"Copy Relative Windows Path",o=a?"terminal":"folder-closed";t.addItem(n=>{n.setTitle(h).setIcon(o).setSection("shell-path-copy").onClick(async()=>{await this.copyPath(e,s)})})}addPathCopyMenuItems(t,e){let s=this.settings.menuDisplay==="both",a=this.settings.menuDisplay==="windows",h=this.settings.menuDisplay==="linux-mac";t.addSeparator(),(s||h)&&this.createPathMenuItem(t,e,"unix"),(s||a)&&this.createPathMenuItem(t,e,"windows"),!i.Platform.isMobile&&this.settings.showAbsolutePath&&t.addItem(o=>{o.setTitle("Copy Absolute Path").setIcon("link").setSection("shell-path-copy").onClick(async()=>{await this.copyAbsolutePath(e)})})}async copyPath(t,e){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");let s=t.path;e==="windows"?(s=s.replace(/\//g,"\\"),s&&!s.startsWith("\\")&&(s="\\"+s)):s&&!s.startsWith("/")&&(s="/"+s),t.path||(s=e==="windows"?"\\":"/");let a=this.wrapPath(s);if(await navigator.clipboard.writeText(a),this.settings.showNotifications){let h=e==="unix"?"Linux/Mac":"Windows";new i.Notice(`${h} path copied!`)}}catch(s){s instanceof Error&&s.message.includes("Clipboard API")?new i.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy path:",s),new i.Notice("Failed to copy path. See console for details."))}}async copyAbsolutePath(t){try{if(!navigator.clipboard)throw new Error("Clipboard API not available.");if(i.Platform.isMobile){new i.Notice("Absolute paths are not available on mobile devices.");return}let e=this.app.vault.adapter;if(!e||typeof e.getFullRealPath!="function")throw new Error("getFullRealPath method not available on this platform.");let s=e.getFullRealPath(t.path),a=this.settings.wrapAbsolutePathsInQuotes?`"${s}"`:this.wrapPath(s);await navigator.clipboard.writeText(a),this.settings.showNotifications&&new i.Notice("Absolute path copied!")}catch(e){e instanceof Error&&e.message.includes("Clipboard API")?new i.Notice("Error: Clipboard API is not available in this environment."):(console.error("Shell Path Copy: Failed to copy absolute path:",e),new i.Notice("Failed to copy absolute path. See console for details."))}}wrapPath(t){switch(this.settings.pathWrapping){case"double-quotes":return`"${t}"`;case"single-quotes":return`'${t}'`;case"backticks":return`\`${t}\``;case"none":default:return t}}getActiveFile(){return this.app.workspace.getActiveFile()}getFocusedFileInExplorer(){let t=this.app.workspace.getLeavesOfType("file-explorer")[0];if(!t)return null;let e=t.view.containerEl.querySelector(".nav-file.is-focused, .nav-folder.is-focused");if(!e)return null;let s=e.getAttribute("data-path");return s?this.app.vault.getAbstractFileByPath(s):null}getActiveOrFocusedFile(){let t=this.getActiveFile();return t||(t=this.getFocusedFileInExplorer()),t||new i.Notice("No file selected"),t}},c=class extends i.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Shell Path Copy"}),t.createEl("p",{text:"Copy file and folder paths with shell-friendly formatting for Linux and Windows.",cls:"setting-item-description"});let e=t.createEl("div",{cls:"setting-item-description"}),s=(o,n)=>{let u=e.createEl("a",{text:o,href:n});return u.onclick=d=>{d.preventDefault(),window.open(n)},u};s("GitHub Repository","https://github.com/ckelsoe/obsidian-shell-path-copy"),e.createEl("span",{text:" | "}),s("Report Issues & Feature Requests","https://github.com/ckelsoe/obsidian-shell-path-copy/issues");let a=this.plugin.manifest.version||"1.0.0";e.createEl("span",{text:` | Version ${a}`}),t.createEl("br"),t.createEl("br"),t.createEl("h3",{text:"Settings"}),t.createEl("div",{text:"Path Format Examples:",cls:"setting-item-heading"});let h=t.createEl("div",{cls:"setting-item-description"});h.createEl("div",{text:"\u2022 Linux/Mac: /folder/subfolder/file.md"}),h.createEl("div",{text:"\u2022 Windows: \\folder\\subfolder\\file.md"}),h.createEl("div",{text:"\u2022 Absolute: C:\\Users\\name\\vault\\folder\\file.md (Windows) or /home/user/vault/folder/file.md (Linux/Mac)"}),t.createEl("br"),new i.Setting(t).setName("Path wrapping").setDesc("Choose how paths are wrapped when copied to clipboard (useful for paths with spaces)").addDropdown(o=>o.addOption("none","None - /path with spaces/file.md").addOption("double-quotes",'Double quotes - "/path with spaces/file.md"').addOption("single-quotes","Single quotes - '/path with spaces/file.md'").addOption("backticks","Backticks - `/path with spaces/file.md`").setValue(this.plugin.settings.pathWrapping).onChange(async n=>{this.plugin.settings.pathWrapping=n,await this.plugin.saveSettings()})),new i.Setting(t).setName("Menu display").setDesc("Control which path formats appear in the context menu").addDropdown(o=>o.addOption("both","Show both Windows and Linux/Mac options").addOption("windows","Show Windows options only").addOption("linux-mac","Show Linux/Mac options only").setValue(this.plugin.settings.menuDisplay).onChange(async n=>{this.plugin.settings.menuDisplay=n,await this.plugin.saveSettings(),new i.Notice("Please reload Obsidian for command palette changes to take effect")})),i.Platform.isMobile||(new i.Setting(t).setName("Show absolute path option").setDesc("Display the absolute path copy option in menus (Desktop only)").addToggle(o=>o.setValue(this.plugin.settings.showAbsolutePath).onChange(async n=>{this.plugin.settings.showAbsolutePath=n,await this.plugin.saveSettings(),new i.Notice("Please reload Obsidian for command palette changes to take effect")})),this.plugin.settings.showAbsolutePath&&new i.Setting(t).setName("Wrap absolute paths in quotes").setDesc("Always wrap absolute paths in double quotes (recommended for paths with spaces)").addToggle(o=>o.setValue(this.plugin.settings.wrapAbsolutePathsInQuotes).onChange(async n=>{this.plugin.settings.wrapAbsolutePathsInQuotes=n,await this.plugin.saveSettings()}))),new i.Setting(t).setName("Show notifications").setDesc("Display a notification when a path is copied").addToggle(o=>o.setValue(this.plugin.settings.showNotifications).onChange(async n=>{this.plugin.settings.showNotifications=n,await this.plugin.saveSettings()}))}};
